<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio Admin Panel</title>
    <link rel="stylesheet" href="admin-styles.css">
    <script src="github-config.js"></script>
</head>
<body>
    <!-- Authentication Check Script -->
    <script>
        // Temporarily disable authentication - admin is now open access
        console.log('Admin authentication disabled for development');
    </script>

    <!-- Admin Header -->
    <header class="admin-header">
            <div class="admin-container">
        <h1>Portfolio Admin Panel</h1>
        
        <!-- Clear All Data Button -->
        <div class="clear-all-section" style="background: #ffebee; border: 1px solid #f44336; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
            <h3 style="color: #d32f2f; margin-top: 0;">Clear All Data</h3>
            <p style="color: #666; margin-bottom: 15px;">This will completely clear all portfolio data and cached content. Use this if you're seeing old default content.</p>
            <button onclick="clearAllData()" style="background: #f44336; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer;">Clear All Portfolio Data</button>
        </div>
        
        <!-- Auto-Save Setup Section -->
        <div id="autoSaveSetup" class="auto-save-section" style="background: #e3f2fd; border: 1px solid #2196f3; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
            <h3 style="color: #1976d2; margin-top: 0;">üöÄ Auto-Save Setup</h3>
            <p style="color: #666; margin-bottom: 15px;">Enable automatic saving to make your changes live instantly for everyone!</p>
            <div id="tokenStatus" style="margin-bottom: 10px;">
                <span id="tokenStatusText">‚ùå Auto-save disabled</span>
            </div>
            <div style="display: flex; gap: 10px; align-items: center; flex-wrap: wrap;">
                <input type="password" id="githubToken" placeholder="Enter GitHub Personal Access Token" style="flex: 1; min-width: 300px; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                <button onclick="saveGitHubToken()" style="background: #4caf50; color: white; padding: 8px 16px; border: none; border-radius: 4px; cursor: pointer;">Enable Auto-Save</button>
                <button onclick="showTokenInstructions()" style="background: #ff9800; color: white; padding: 8px 16px; border: none; border-radius: 4px; cursor: pointer;">How to get token?</button>
                <button onclick="testGitHubConnection()" style="background: #9c27b0; color: white; padding: 8px 16px; border: none; border-radius: 4px; cursor: pointer;">üîß Test Connection</button>
            </div>
        </div>
            <div class="admin-actions">
                <button id="logoutBtn" class="btn btn-warning" onclick="adminLogout()" style="background: #ff9800; margin-right: 10px;">üîì Logout</button>
                <button id="exportBtn" class="btn btn-info" onclick="exportPortfolioData()" style="background: #17a2b8; margin-right: 10px;">üì• Export Data</button>
                <button id="previewBtn" class="btn btn-secondary">Preview Site</button>
                <button id="saveAllBtn" class="btn btn-primary">Save All Changes</button>
            </div>
        </div>
    </header>

    <!-- Admin Navigation -->
    <nav class="admin-nav">
        <div class="admin-container">
            <ul class="admin-nav-list">
                <li><a href="#personal-info" class="admin-nav-link active">Personal Info</a></li>
                <li><a href="#hero-section" class="admin-nav-link">Hero Section</a></li>
                <li><a href="#about-section" class="admin-nav-link">About</a></li>
                <li><a href="#education-section" class="admin-nav-link">Education</a></li>
                <li><a href="#skills-section" class="admin-nav-link">Skills</a></li>
                <li><a href="#projects-section" class="admin-nav-link">Projects</a></li>
                <li><a href="#publications-section" class="admin-nav-link">Publications</a></li>
                <li><a href="#podcasts-section" class="admin-nav-link">Podcasts</a></li>
                <li><a href="#videos-section" class="admin-nav-link">Videos</a></li>
                <li><a href="#awards-section" class="admin-nav-link">Awards</a></li>
                <li><a href="#contact-section" class="admin-nav-link">Contact</a></li>
                <li><a href="#settings" class="admin-nav-link">Settings</a></li>
            </ul>
        </div>
    </nav>

    <!-- Main Admin Content -->
    <main class="admin-main">
        <div class="admin-container">
            
            <!-- Personal Information Section -->
            <section id="personal-info" class="admin-section active">
                <h2>Personal Information</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="fullName">Full Name</label>
                        <input type="text" id="fullName" placeholder="Enter your full name">
                    </div>
                    
                    <div class="form-group">
                        <label for="title">Professional Title</label>
                        <input type="text" id="title" placeholder="e.g., Computer Science Student">
                    </div>
                    
                    <div class="form-group full-width">
                        <label for="tagline">Tagline</label>
                        <input type="text" id="tagline" placeholder="Brief description of yourself">
                    </div>
                    
                    <div class="form-group full-width">
                        <label for="profileImage">Profile Image</label>
                        <div class="image-upload-section">
                            <div class="current-image">
                                <img id="currentProfileImg" src="https://via.placeholder.com/150x150/3498db/ffffff?text=No+Image" alt="Current Profile" class="admin-profile-preview">
                            </div>
                            <div class="image-upload-options">
                                <div class="upload-option">
                                    <label for="profileImageFile" class="btn btn-primary upload-btn">
                                        üìÅ Upload Image File
                                    </label>
                                    <input type="file" id="profileImageFile" accept="image/*" style="display: none;">
                                    <small>Upload JPG, PNG, or GIF (max 5MB)</small>
                                </div>
                                <div class="upload-divider">OR</div>
                                <div class="upload-option">
                                    <input type="url" id="profileImage" placeholder="https://example.com/your-image.jpg">
                                    <small>Enter image URL</small>
                                </div>
                                <div class="image-actions">
                                    <button type="button" id="deleteProfileBtn" class="btn btn-danger btn-small">
                                        üóëÔ∏è Delete Image
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="section-actions">
                    <button type="button" id="savePersonalBtn" class="btn btn-primary">üíæ Save Personal Info</button>
                </div>
            </section>

            <!-- Hero Section -->
            <section id="hero-section" class="admin-section">
                <h2>Hero Section (Home Page)</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="heroName">Display Name</label>
                        <input type="text" id="heroName" placeholder="Your Name (as shown on homepage)">
                        <small>This is how your name appears in the main hero section</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="heroTitle">Professional Title</label>
                        <input type="text" id="heroTitle" placeholder="e.g., Computer Science Student">
                        <small>Your current role or status</small>
                    </div>
                    
                    <div class="form-group full-width">
                        <label for="heroTagline">Hero Tagline</label>
                        <input type="text" id="heroTagline" placeholder="e.g., Passionate about web development and technology">
                        <small>Brief inspiring statement about yourself</small>
                    </div>
                    
                    <div class="form-group full-width">
                        <label for="heroSubtitle">Hero Subtitle (optional)</label>
                        <textarea id="heroSubtitle" rows="3" placeholder="Additional description or motto that appears below your tagline"></textarea>
                        <small>Optional longer description for the hero section</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="heroButtonText">Call-to-Action Button Text</label>
                        <input type="text" id="heroButtonText" placeholder="Learn More About Me">
                        <small>Text for the main button in hero section</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="heroButtonUrl">Button Link</label>
                        <select id="heroButtonUrl">
                            <option value="#about">About Section</option>
                            <option value="#projects">Projects Section</option>
                            <option value="#skills">Skills Section</option>
                            <option value="#contact">Contact Section</option>
                            <option value="#education">Education Section</option>
                        </select>
                        <small>Where the hero button should link to</small>
                    </div>
                </div>
                <div class="section-actions">
                    <button type="button" id="saveHeroBtn" class="btn btn-primary">üíæ Save Hero Section</button>
                </div>
            </section>

            <!-- About Section -->
            <section id="about-section" class="admin-section">
                <h2>About Section</h2>
                <div class="form-grid">
                    <div class="form-group full-width">
                        <label for="aboutText">About Me Description</label>
                        <textarea id="aboutText" rows="6" placeholder="Write about yourself, your interests, and goals..."></textarea>
                    </div>
                </div>
                <div class="section-actions">
                    <button type="button" id="saveAboutBtn" class="btn btn-primary">üíæ Save About Section</button>
                </div>
            </section>

            <!-- Education Section -->
            <section id="education-section" class="admin-section">
                <h2>Education Management</h2>
                <div class="education-admin">
                    <div class="education-header">
                        <h3>Your Education</h3>
                        <div class="education-actions">
                            <button id="addEducationBtn" class="btn btn-primary">Add New Education</button>
                            <button id="deleteAllEducationBtn" class="btn btn-danger">üóëÔ∏è Delete All Education</button>
                        </div>
                    </div>
                    
                    <div id="educationList" class="education-list">
                        <!-- Education items will be dynamically added here -->
                    </div>
                </div>
                <div class="section-actions">
                    <button type="button" id="saveEducationBtn" class="btn btn-primary">üíæ Save All Education</button>
                </div>
            </section>

            <!-- Skills Section -->
            <section id="skills-section" class="admin-section">
                <h2>Skills Management</h2>
                <div class="skills-admin">
                    <div class="skills-header">
                        <h3>Your Skills</h3>
                        <div class="skills-actions">
                            <button id="addSkillBtn" class="btn btn-primary">Add New Skill</button>
                            <button id="deleteAllSkillsBtn" class="btn btn-danger">üóëÔ∏è Delete All Skills</button>
                        </div>
                    </div>
                    
                    <div id="skillsList" class="skills-list">
                        <!-- Skills will be dynamically added here -->
                    </div>
                </div>
                <div class="section-actions">
                    <button type="button" id="saveSkillsBtn" class="btn btn-primary">üíæ Save All Skills</button>
                </div>
            </section>

            <!-- Projects Section -->
            <section id="projects-section" class="admin-section">
                <h2>Projects Management</h2>
                
                <div class="projects-admin">
                    <div class="projects-header">
                        <h3>Your Projects</h3>
                        <div class="projects-actions">
                            <button id="addProjectBtn" class="btn btn-primary">Add New Project</button>
                            <button id="deleteAllProjectsBtn" class="btn btn-danger">üóëÔ∏è Delete All Projects</button>
                        </div>
                    </div>
                    
                    <div id="projectsList" class="projects-list">
                        <!-- Projects will be dynamically added here -->
                    </div>
                </div>
                
                <div class="section-actions">
                    <button type="button" id="saveProjectsBtn" class="btn btn-primary">üíæ Save All Projects</button>
                </div>
            </section>

            <!-- Publications Section -->
            <section id="publications-section" class="admin-section">
                <h2>Publications Management</h2>
                <div class="publications-admin">
                    <div class="publications-header">
                        <h3>Your Publications</h3>
                        <div class="publications-actions">
                            <button id="addPublicationBtn" class="btn btn-primary">Add New Publication</button>
                            <button id="deleteAllPublicationsBtn" class="btn btn-danger">üóëÔ∏è Delete All Publications</button>
                        </div>
                    </div>
                    
                    <div id="publicationsList" class="publications-list">
                        <!-- Publications will be dynamically added here -->
                    </div>
                </div>
                <div class="section-actions">
                    <button type="button" id="savePublicationsBtn" class="btn btn-primary">üíæ Save All Publications</button>
                </div>
            </section>

            <!-- Podcasts Section -->
            <section id="podcasts-section" class="admin-section">
                <h2>Podcasts & Interviews Management</h2>
                <div class="podcasts-admin">
                    <div class="podcasts-header">
                        <h3>Your Podcast Appearances</h3>
                        <div class="podcasts-actions">
                            <button id="addPodcastBtn" class="btn btn-primary">Add New Podcast</button>
                            <button id="deleteAllPodcastsBtn" class="btn btn-danger">üóëÔ∏è Delete All Podcasts</button>
                        </div>
                    </div>
                    
                    <div id="podcastsList" class="podcasts-list">
                        <!-- Podcasts will be dynamically added here -->
                    </div>
                </div>
                <div class="section-actions">
                    <button type="button" id="savePodcastsBtn" class="btn btn-primary">üíæ Save All Podcasts</button>
                </div>
            </section>

            <!-- Videos Section -->
            <section id="videos-section" class="admin-section">
                <h2>Video Case Studies Management</h2>
                <div class="videos-admin">
                    <div class="videos-header">
                        <h3>Your Video Case Studies</h3>
                        <div class="videos-actions">
                            <button id="addVideoBtn" class="btn btn-primary">Add New Video</button>
                            <button id="deleteAllVideosBtn" class="btn btn-danger">üóëÔ∏è Delete All Videos</button>
                        </div>
                    </div>
                    
                    <div id="videosList" class="videos-list">
                        <!-- Videos will be dynamically added here -->
                    </div>
                </div>
                <div class="section-actions">
                    <button type="button" id="saveVideosBtn" class="btn btn-primary">üíæ Save All Videos</button>
                </div>
            </section>

            <!-- Awards Section -->
            <section id="awards-section" class="admin-section">
                <h2>Awards & Achievements Management</h2>
                <div class="awards-admin">
                    <div class="awards-header">
                        <h3>Your Awards & Achievements</h3>
                        <div class="awards-actions">
                            <button id="addAwardBtn" class="btn btn-primary">Add New Award</button>
                            <button id="deleteAllAwardsBtn" class="btn btn-danger">üóëÔ∏è Delete All Awards</button>
                        </div>
                    </div>
                    
                    <div id="awardsList" class="awards-list">
                        <!-- Awards will be dynamically added here -->
                    </div>
                </div>
                <div class="section-actions">
                    <button type="button" id="saveAwardsBtn" class="btn btn-primary">üíæ Save All Awards</button>
                </div>
            </section>

            <!-- Contact Section -->
            <section id="contact-section" class="admin-section">
                <h2>Contact Information</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" placeholder="your.email@example.com">
                    </div>
                    
                    <div class="form-group">
                        <label for="phone">Phone (optional)</label>
                        <input type="tel" id="phone" placeholder="+1 (555) 123-4567">
                    </div>
                    
                    <div class="form-group">
                        <label for="linkedin">LinkedIn Profile</label>
                        <input type="url" id="linkedin" placeholder="https://linkedin.com/in/yourprofile">
                    </div>
                    
                    <div class="form-group">
                        <label for="github">GitHub Profile (optional)</label>
                        <input type="url" id="github" placeholder="https://github.com/yourusername">
                    </div>
                    
                    <div class="form-group">
                        <label for="twitter">Twitter (optional)</label>
                        <input type="url" id="twitter" placeholder="https://twitter.com/yourusername">
                    </div>
                    
                    <div class="form-group">
                        <label for="website">Personal Website (optional)</label>
                        <input type="url" id="website" placeholder="https://yourwebsite.com">
                    </div>
                </div>
                <div class="section-actions">
                    <button type="button" id="saveContactBtn" class="btn btn-primary">üíæ Save Contact Info</button>
                </div>
            </section>

            <!-- Settings Section -->
            <section id="settings" class="admin-section">
                <h2>Site Settings</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="siteTitle">Site Title</label>
                        <input type="text" id="siteTitle" placeholder="Student Portfolio - Your Name">
                    </div>
                    
                    <div class="form-group">
                        <label for="colorScheme">Color Scheme</label>
                        <select id="colorScheme">
                            <option value="blue">Blue (Default)</option>
                            <option value="green">Green</option>
                            <option value="purple">Purple</option>
                            <option value="orange">Orange</option>
                        </select>
                    </div>
                    
                    <div class="form-group full-width">
                        <label for="metaDescription">Site Description (for SEO)</label>
                        <textarea id="metaDescription" rows="3" placeholder="Brief description of your portfolio for search engines..."></textarea>
                    </div>
                </div>
                
                <div class="section-actions">
                    <button type="button" id="saveSettingsBtn" class="btn btn-primary">üíæ Save Settings</button>
                </div>
                
                <div class="settings-actions">
                    <button id="exportDataBtn" class="btn btn-secondary">Export Data</button>
                    <button id="importDataBtn" class="btn btn-secondary">Import Data</button>
                    <input type="file" id="importFile" accept=".json" style="display: none;">
                    <button id="resetBtn" class="btn btn-danger">Reset to Default</button>
                </div>
            </section>

        </div>
    </main>

    <!-- Education Modal -->
    <div id="educationModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="educationModalTitle">Add New Education</h3>
                <span class="close" id="closeEducationModal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="educationDegree">Degree/Certification</label>
                    <input type="text" id="educationDegree" placeholder="e.g., Bachelor of Computer Science">
                </div>
                
                <div class="form-group">
                    <label for="educationInstitution">Institution</label>
                    <input type="text" id="educationInstitution" placeholder="University/School Name">
                </div>
                
                <div class="form-group">
                    <label for="educationStartMonth">Start Month</label>
                    <select id="educationStartMonth">
                        <option value="">Select Month</option>
                        <option value="01">January</option>
                        <option value="02">February</option>
                        <option value="03">March</option>
                        <option value="04">April</option>
                        <option value="05">May</option>
                        <option value="06">June</option>
                        <option value="07">July</option>
                        <option value="08">August</option>
                        <option value="09">September</option>
                        <option value="10">October</option>
                        <option value="11">November</option>
                        <option value="12">December</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="educationStartYear">Start Year</label>
                    <input type="number" id="educationStartYear" placeholder="2021" min="1990" max="2030">
                </div>
                
                <div class="form-group">
                    <label for="educationEndMonth">End Month</label>
                    <select id="educationEndMonth">
                        <option value="">Select Month</option>
                        <option value="01">January</option>
                        <option value="02">February</option>
                        <option value="03">March</option>
                        <option value="04">April</option>
                        <option value="05">May</option>
                        <option value="06">June</option>
                        <option value="07">July</option>
                        <option value="08">August</option>
                        <option value="09">September</option>
                        <option value="10">October</option>
                        <option value="11">November</option>
                        <option value="12">December</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="educationEndYear">End Year (or Expected)</label>
                    <input type="number" id="educationEndYear" placeholder="2025" min="1990" max="2035">
                </div>
                
                <div class="form-group">
                    <label for="educationDescription">Description (optional)</label>
                    <textarea id="educationDescription" rows="4" placeholder="Relevant coursework, achievements, GPA, etc."></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button id="cancelEducationBtn" class="btn btn-secondary">Cancel</button>
                <button id="saveEducationEntryBtn" class="btn btn-primary">Save Education</button>
            </div>
        </div>
    </div>

    <!-- Project Modal -->
    <div id="projectModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Add New Project</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="projectName">Project Name</label>
                    <input type="text" id="projectName" placeholder="Enter project name">
                </div>
                
                <div class="form-group">
                    <label for="projectDescription">Description</label>
                    <textarea id="projectDescription" rows="4" placeholder="Describe your project..."></textarea>
                </div>
                
                <div class="form-group">
                    <label for="projectTech">Technologies (separate with commas)</label>
                    <input type="text" id="projectTech" placeholder="HTML, CSS, JavaScript">
                </div>
                
                <div class="form-group">
                    <label for="projectUrl">Project URL (optional)</label>
                    <input type="url" id="projectUrl" placeholder="https://yourproject.com">
                </div>
                
                <div class="form-group">
                    <label for="projectGithub">GitHub URL (optional)</label>
                    <input type="url" id="projectGithub" placeholder="https://github.com/username/project">
                </div>
            </div>
            <div class="modal-footer">
                <button id="cancelProjectBtn" class="btn btn-secondary">Cancel</button>
                <button id="saveProjectBtn" class="btn btn-primary">Save Project</button>
            </div>
        </div>
    </div>

    <!-- Success/Error Messages -->
    <div id="messageContainer" class="message-container"></div>

    <!-- Publication Modal -->
    <div id="publicationModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="publicationModalTitle">Add New Publication</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="publicationForm" class="admin-form">
                    <div class="form-group">
                        <label for="publicationTitle">Publication Title:</label>
                        <input type="text" id="publicationTitle" name="title">
                    </div>
                    
                    <div class="form-group">
                        <label for="publicationJournal">Journal/Conference:</label>
                        <input type="text" id="publicationJournal" name="journal">
                    </div>
                    
                    <div class="form-group">
                        <label for="publicationDate">Publication Date:</label>
                        <input type="date" id="publicationDate" name="date">
                    </div>
                    
                    <div class="form-group">
                        <label for="publicationAuthors">Authors:</label>
                        <input type="text" id="publicationAuthors" name="authors" placeholder="e.g., John Doe, Jane Smith">
                    </div>
                    
                    <div class="form-group">
                        <label for="publicationAbstract">Abstract/Summary:</label>
                        <textarea id="publicationAbstract" name="abstract" rows="4"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="publicationUrl">Link to Publication:</label>
                        <input type="url" id="publicationUrl" name="url" placeholder="https://...">
                    </div>
                    
                    <div class="form-group">
                        <label for="publicationDoi">DOI (optional):</label>
                        <input type="text" id="publicationDoi" name="doi" placeholder="10.1000/182">
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Save Publication</button>
                        <button type="button" class="btn btn-secondary cancel-btn">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Podcast Modal -->
    <div id="podcastModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="podcastModalTitle">Add New Podcast</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="podcastForm" class="admin-form">
                    <div class="form-group">
                        <label for="podcastTitle">Episode Title:</label>
                        <input type="text" id="podcastTitle" name="title">
                    </div>
                    
                    <div class="form-group">
                        <label for="podcastShow">Podcast Show Name:</label>
                        <input type="text" id="podcastShow" name="show">
                    </div>
                    
                    <div class="form-group">
                        <label for="podcastDate">Air Date:</label>
                        <input type="date" id="podcastDate" name="date">
                    </div>
                    
                    <div class="form-group">
                        <label for="podcastHost">Host(s):</label>
                        <input type="text" id="podcastHost" name="host" placeholder="e.g., John Doe">
                    </div>
                    
                    <div class="form-group">
                        <label for="podcastDescription">Episode Description:</label>
                        <textarea id="podcastDescription" name="description" rows="4"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="podcastUrl">Link to Episode:</label>
                        <input type="url" id="podcastUrl" name="url" placeholder="https://...">
                    </div>
                    
                    <div class="form-group">
                        <label for="podcastPlatform">Platform:</label>
                        <select id="podcastPlatform" name="platform">
                            <option value="">Select Platform</option>
                            <option value="Spotify">Spotify</option>
                            <option value="Apple Podcasts">Apple Podcasts</option>
                            <option value="Google Podcasts">Google Podcasts</option>
                            <option value="YouTube">YouTube</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Save Podcast</button>
                        <button type="button" class="btn btn-secondary cancel-btn">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Video Modal -->
    <div id="videoModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="videoModalTitle">Add New Video</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="videoForm" class="admin-form">
                    <div class="form-group">
                        <label for="videoTitle">Video Title:</label>
                        <input type="text" id="videoTitle" name="title" required placeholder="Enter video title">
                    </div>
                    
                    <div class="form-group">
                        <label for="videoUrl">Video URL:</label>
                        <input type="url" id="videoUrl" name="url" required placeholder="https://www.youtube.com/watch?v=... or https://youtu.be/...">
                        <small>Paste any YouTube URL here and it will automatically embed the video on your site!</small>
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Save Video</button>
                        <button type="button" class="btn btn-secondary cancel-btn">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Award Modal -->
    <div id="awardModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="awardModalTitle">Add New Award</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="awardForm" class="admin-form">
                    <div class="form-group">
                        <label for="awardTitle">Award Title:</label>
                        <input type="text" id="awardTitle" name="title">
                    </div>
                    
                    <div class="form-group">
                        <label for="awardOrganization">Organization/Institution:</label>
                        <input type="text" id="awardOrganization" name="organization">
                    </div>
                    
                    <div class="form-group">
                        <label for="awardDate">Date Received:</label>
                        <input type="date" id="awardDate" name="date">
                    </div>
                    
                    <div class="form-group">
                        <label for="awardCategory">Category:</label>
                        <select id="awardCategory" name="category">
                            <option value="">Select Category</option>
                            <option value="Academic">Academic Excellence</option>
                            <option value="Research">Research Achievement</option>
                            <option value="Leadership">Leadership</option>
                            <option value="Community Service">Community Service</option>
                            <option value="Technical">Technical Achievement</option>
                            <option value="Sports">Sports & Athletics</option>
                            <option value="Arts">Arts & Culture</option>
                            <option value="MCH">Major Achievement in MCH</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="awardDescription">Description:</label>
                        <textarea id="awardDescription" name="description" rows="4"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="awardIcon">Icon (Emoji):</label>
                        <input type="text" id="awardIcon" name="icon" placeholder="üèÜ ü•á üéñÔ∏è üéóÔ∏è üèÖ" maxlength="2">
                        <small>Choose an emoji to represent your award (e.g., üèÜ ü•á üéñÔ∏è üéóÔ∏è üèÖ)</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="awardUrl">Certificate/Link (optional):</label>
                        <input type="url" id="awardUrl" name="url" placeholder="https://...">
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Save Award</button>
                        <button type="button" class="btn btn-secondary cancel-btn">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Skills Modal -->
    <div id="skillModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="skillModalTitle">Add New Skill</h3>
                <span class="close" id="closeSkillModal">&times;</span>
            </div>
            <div class="modal-body">
                <form id="skillForm" class="admin-form">
                    <div class="form-group">
                        <label for="skillName">Skill Name</label>
                        <input type="text" id="skillName" placeholder="e.g., JavaScript, Python, Project Management">
                    </div>
                    
                    <div class="form-group">
                        <label for="skillCategory">Category (optional)</label>
                        <select id="skillCategory">
                            <option value="">Select Category</option>
                            <option value="Programming Languages">Programming Languages</option>
                            <option value="Web Technologies">Web Technologies</option>
                            <option value="Frameworks & Libraries">Frameworks & Libraries</option>
                            <option value="Database">Database</option>
                            <option value="Tools & Software">Tools & Software</option>
                            <option value="Cloud & DevOps">Cloud & DevOps</option>
                            <option value="Design">Design</option>
                            <option value="Soft Skills">Soft Skills</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="skillProficiency">Proficiency Level (optional)</label>
                        <select id="skillProficiency">
                            <option value="">Select Level</option>
                            <option value="Beginner">Beginner</option>
                            <option value="Intermediate">Intermediate</option>
                            <option value="Advanced">Advanced</option>
                            <option value="Expert">Expert</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button id="cancelSkillBtn" class="btn btn-secondary">Cancel</button>
                <button id="saveSkill" class="btn btn-primary">Save Skill</button>
            </div>
        </div>
    </div>

    <!-- Admin Authentication Functions -->
    <script>
        // Auto-save system - saves directly to GitHub
        async function autoSaveToGitHub() {
            try {
                const saveBtn = document.getElementById('saveAllBtn');
                const exportBtn = document.getElementById('exportBtn');
                
                // Show loading state
                if (saveBtn) {
                    saveBtn.textContent = 'üíæ Saving...';
                    saveBtn.disabled = true;
                }
                
                const data = JSON.parse(localStorage.getItem('portfolioData') || '{}');
                
                const dataContent = `// Auto-generated portfolio data - Auto-saved from admin panel
// Generated on: ${new Date().toISOString()}

window.PORTFOLIO_DATA = ${JSON.stringify(data, null, 2)};

// Auto-load this data when the page loads
if (typeof loadAllPortfolioData === 'function') {
    document.addEventListener('DOMContentLoaded', function() {
        // Use static data if no localStorage data exists
        const existingData = localStorage.getItem('portfolioData');
        if (!existingData || existingData === '{}') {
            localStorage.setItem('portfolioData', JSON.stringify(window.PORTFOLIO_DATA));
            console.log('Loaded portfolio data from auto-saved file');
        }
        // Always reload with current data
        setTimeout(loadAllPortfolioData, 100);
    });
}`;

                // Save to portfolio-data.js using GitHub API or Netlify
                const success = await saveToPortfolioFile(dataContent);
                
                if (success) {
                    showMessage('‚úÖ Portfolio saved successfully! Changes are now live for everyone.', 'success');
                } else {
                    // Fallback to manual export
                    exportDataManual(dataContent);
                }
                
                // Reset button state
                if (saveBtn) {
                    saveBtn.textContent = 'üíæ Save All Changes';
                    saveBtn.disabled = false;
                }
                
            } catch (error) {
                console.error('Auto-save error:', error);
                showMessage('‚ùå Auto-save failed. Please try manual export.', 'error');
                
                // Reset button state
                const saveBtn = document.getElementById('saveAllBtn');
                if (saveBtn) {
                    saveBtn.textContent = 'üíæ Save All Changes';
                    saveBtn.disabled = false;
                }
            }
        }

        // Save to portfolio-data.js file
        async function saveToPortfolioFile(content) {
            try {
                // For Netlify deployment, we'll use a serverless function
                const response = await fetch('/.netlify/functions/save-portfolio', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        content: content,
                        filename: 'portfolio-data.js'
                    })
                });
                
                if (response.ok) {
                    return true;
                }
            } catch (error) {
                console.log('Netlify function not available, using fallback');
            }
            
            // Fallback: Try GitHub API direct save (if configured)
            try {
                const githubToken = localStorage.getItem('githubToken');
                if (githubToken) {
                    return await saveToGitHub(content, githubToken);
                }
            } catch (error) {
                console.log('GitHub direct save failed');
            }
            
            return false; // Fallback to manual export
        }

        // GitHub API save function
        async function saveToGitHub(content, token) {
            const repo = 'bdhir2003/www1';
            const path = 'portfolio-data.js';
            
            try {
                console.log('üîÑ Starting GitHub save process...');
                console.log('üìÅ Repository:', repo);
                console.log('üìÑ File path:', path);
                
                // Get current file SHA (needed for updates)
                console.log('üì• Getting current file info...');
                const getResponse = await fetch(`https://api.github.com/repos/${repo}/contents/${path}`, {
                    headers: {
                        'Authorization': `token ${token}`,
                        'Accept': 'application/vnd.github.v3+json'
                    }
                });
                
                let sha = null;
                if (getResponse.ok) {
                    const fileData = await getResponse.json();
                    sha = fileData.sha;
                    console.log('‚úÖ Found existing file, SHA:', sha.substring(0, 8) + '...');
                } else {
                    const errorData = await getResponse.json();
                    console.log('‚ÑπÔ∏è File not found or error:', errorData.message);
                    
                    if (getResponse.status === 404) {
                        console.log('üÜï Will create new file');
                    } else if (getResponse.status === 401) {
                        console.error('‚ùå Authentication failed - check your token permissions');
                        showMessage('‚ùå GitHub authentication failed. Check your token permissions.', 'error');
                        return false;
                    } else {
                        console.error('‚ùå Error getting file info:', errorData);
                        showMessage(`‚ùå GitHub API error: ${errorData.message}`, 'error');
                        return false;
                    }
                }
                
                // Update or create file
                console.log('üíæ Saving file to GitHub...');
                const updateResponse = await fetch(`https://api.github.com/repos/${repo}/contents/${path}`, {
                    method: 'PUT',
                    headers: {
                        'Authorization': `token ${token}`,
                        'Accept': 'application/vnd.github.v3+json',
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        message: 'Auto-save: Update portfolio data from admin panel',
                        content: btoa(content), // Base64 encode
                        sha: sha // Include SHA if updating existing file
                    })
                });
                
                if (updateResponse.ok) {
                    const result = await updateResponse.json();
                    console.log('‚úÖ File saved successfully!');
                    console.log('üîó Commit URL:', result.commit?.html_url);
                    return true;
                } else {
                    const errorData = await updateResponse.json();
                    console.error('‚ùå Save failed:', errorData);
                    showMessage(`‚ùå GitHub save failed: ${errorData.message}`, 'error');
                    return false;
                }
                
            } catch (error) {
                console.error('‚ùå GitHub save error:', error);
                showMessage(`‚ùå GitHub save error: ${error.message}`, 'error');
                return false;
            }
        }

        // Show message to user
        function showMessage(text, type = 'info') {
            const container = document.getElementById('messageContainer') || document.body;
            const message = document.createElement('div');
            message.className = `admin-message admin-message-${type}`;
            message.textContent = text;
            message.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 5px;
                color: white;
                font-weight: bold;
                z-index: 10000;
                max-width: 400px;
                ${type === 'success' ? 'background: #4CAF50;' : ''}
                ${type === 'error' ? 'background: #f44336;' : ''}
                ${type === 'info' ? 'background: #2196F3;' : ''}
            `;
            
            container.appendChild(message);
            
            // Auto-remove after 5 seconds
            setTimeout(() => {
                if (message.parentNode) {
                    message.parentNode.removeChild(message);
                }
            }, 5000);
        }

        // Global export function for the export button (fallback)
        function exportPortfolioData() {
            const data = JSON.parse(localStorage.getItem('portfolioData') || '{}');
            exportDataManual(`// Auto-generated portfolio data - Manual export
// Generated on: ${new Date().toISOString()}

window.PORTFOLIO_DATA = ${JSON.stringify(data, null, 2)};

// Auto-load this data when the page loads
if (typeof loadAllPortfolioData === 'function') {
    document.addEventListener('DOMContentLoaded', function() {
        const existingData = localStorage.getItem('portfolioData');
        if (!existingData || existingData === '{}') {
            localStorage.setItem('portfolioData', JSON.stringify(window.PORTFOLIO_DATA));
        }
        setTimeout(loadAllPortfolioData, 100);
    });
}`);
        }

        // Manual export function as fallback
        function exportDataManual(dataContent) {
            try {
                // Create downloadable file
                const blob = new Blob([dataContent], { type: 'application/javascript' });
                const url = URL.createObjectURL(blob);
                
                // Create download link
                const link = document.createElement('a');
                link.href = url;
                link.download = 'portfolio-data.js';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                URL.revokeObjectURL(url);
                
                showMessage('üì• Portfolio data exported! Please upload the file to see changes live.', 'info');
            } catch (error) {
                showMessage('‚ùå Export failed: ' + error.message, 'error');
            }
        }

        function adminLogout() {
            if (confirm('Are you sure you want to logout?')) {
                // Clear authentication session
                sessionStorage.removeItem('adminAuthenticated');
                sessionStorage.removeItem('adminLoginTime');
                
                // Redirect to login page
                window.location.href = 'admin-login.html';
            }
        }

        // Auto-logout on session expiry (check every minute)
        setInterval(function() {
            const loginTime = sessionStorage.getItem('adminLoginTime');
            const currentTime = Date.now();
            const sessionDuration = 2 * 60 * 60 * 1000; // 2 hours
            
            if (!loginTime || (currentTime - parseInt(loginTime)) > sessionDuration) {
                alert('Your session has expired. Please login again.');
                adminLogout();
            }
        }, 60000); // Check every minute
        
        // Initialize auto-save functionality when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Check GitHub token status
            updateTokenStatus();
            
            // Add event listener to Save All Changes button
            const saveAllBtn = document.getElementById('saveAllBtn');
            if (saveAllBtn) {
                saveAllBtn.addEventListener('click', function() {
                    autoSaveToGitHub();
                });
            }
            
            // Add event listener to individual save buttons for auto-save
            const saveButtons = document.querySelectorAll('[id*="save"][id*="Btn"]:not(#saveAllBtn)');
            saveButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    // Small delay to ensure data is saved to localStorage first
                    setTimeout(() => {
                        autoSaveToGitHub();
                    }, 500);
                });
            });
        });
        
        // GitHub token management functions
        function updateTokenStatus() {
            const token = localStorage.getItem('githubToken');
            const statusText = document.getElementById('tokenStatusText');
            const saveAllBtn = document.getElementById('saveAllBtn');
            
            if (token) {
                statusText.textContent = '‚úÖ Auto-save enabled - Changes will be live instantly!';
                statusText.style.color = '#4caf50';
                if (saveAllBtn) {
                    saveAllBtn.style.background = '#4caf50';
                    saveAllBtn.textContent = 'üíæ Save & Publish Live';
                }
            } else {
                statusText.textContent = '‚ùå Auto-save disabled - Manual export required';
                statusText.style.color = '#f44336';
                if (saveAllBtn) {
                    saveAllBtn.style.background = '#2196f3';
                    saveAllBtn.textContent = 'üíæ Save All Changes';
                }
            }
        }
        
        function saveGitHubToken() {
            const tokenInput = document.getElementById('githubToken');
            const token = tokenInput.value.trim();
            
            if (!token) {
                alert('Please enter a GitHub Personal Access Token');
                return;
            }
            
            // Basic validation
            if (token.length < 20) {
                alert('Invalid token format. GitHub tokens are usually longer.');
                return;
            }
            
            localStorage.setItem('githubToken', token);
            tokenInput.value = '';
            updateTokenStatus();
            showMessage('‚úÖ Auto-save enabled! Your saves will now be live instantly.', 'success');
        }
        
        function showTokenInstructions() {
            const instructions = `
üîß How to get a GitHub Personal Access Token:

1. Go to GitHub.com and sign in
2. Click your profile picture ‚Üí Settings
3. Scroll down to "Developer settings"
4. Click "Personal access tokens" ‚Üí "Tokens (classic)"
5. Click "Generate new token (classic)"
6. Name it "Portfolio Auto-Save"
7. Select "repo" permission (full repository access)
8. Click "Generate token"
9. Copy the token and paste it above
10. Click "Enable Auto-Save"

‚ö° Once enabled, clicking "Save" will instantly update your live website!
            `;
            
            alert(instructions);
        }
        
        // Test GitHub connection
        async function testGitHubConnection() {
            const token = localStorage.getItem('githubToken');
            
            if (!token) {
                showMessage('‚ùå No GitHub token found. Please add your token first.', 'error');
                return;
            }
            
            showMessage('üîÑ Testing GitHub connection...', 'info');
            
            try {
                // Test repository access
                const response = await fetch('https://api.github.com/repos/bdhir2003/student-portfolio1', {
                    headers: {
                        'Authorization': `token ${token}`,
                        'Accept': 'application/vnd.github.v3+json'
                    }
                });
                
                if (response.ok) {
                    const repo = await response.json();
                    showMessage(`‚úÖ GitHub connection successful! Repository: ${repo.full_name}`, 'success');
                    
                    // Test a small write operation
                    const testContent = `// Test file - ${new Date().toISOString()}
console.log('GitHub auto-save test successful!');`;
                    
                    const success = await saveToGitHub(testContent, token);
                    if (success) {
                        showMessage('‚úÖ Write test successful! Auto-save is working properly.', 'success');
                    }
                } else {
                    const error = await response.json();
                    showMessage(`‚ùå GitHub connection failed: ${error.message}`, 'error');
                    console.error('GitHub test failed:', error);
                }
            } catch (error) {
                showMessage(`‚ùå Connection test failed: ${error.message}`, 'error');
                console.error('Connection test error:', error);
            }
        }
    </script>

    <script src="admin-script.js"></script>
</body>
</html>
